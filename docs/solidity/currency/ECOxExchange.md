# Eco Association

Copyright (c) 2023 Eco Association

## ECOxExchange

**EcoX Exchange Contract**

_Exchange for ECOx to ECO_

### PRECISION_BITS

_bits of precision used in the exponentiation approximation_

  ```solidity
  uint8 PRECISION_BITS
  ```

### initialSupply

_initial supply of ECOx at deployment_

  ```solidity
  uint256 initialSupply
  ```

### ecox

_ECOx token contract_

  ```solidity
  contract ECOx ecox
  ```

### eco

_ECO token contract_

  ```solidity
  contract ECO eco
  ```

### constructor

_constructor_

  ```solidity
  constructor(contract Policy policy, contract ECOx _ECOx, contract ECO _eco, uint256 _initialSupply) public
  ```
#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| policy | contract Policy | policy address |
| _ECOx | contract ECOx | ECOx address |
| _eco | contract ECO | ECO address |
| _initialSupply | uint256 | initial supply of ECOx |

### ecoValueOf

_Calculates the value of ECOx by multiplying value by supply_

  ```solidity
  function ecoValueOf(uint256 _ecoXValue) public view returns (uint256 ecoValue)
  ```
#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| _ecoXValue | uint256 | the value of ECOx |

#### Return Values

| Name | Type | Description |
| ---- | ---- | ----------- |
| ecoValue | uint256 | the value of ECOx multiplied by total supply |

### valueAt

_Calculates the value of ECOx at the total supply snapshot_

  ```solidity
  function valueAt(uint256 _ecoXValue) public view returns (uint256)
  ```
#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| _ecoXValue | uint256 | the value of ECOx |

#### Return Values

| Name | Type | Description |
| ---- | ---- | ----------- |
| [0] | uint256 | returnValue the value of ECOx multiplied by the total supply at the time of snapshot |

### exchange

_Exchange ECOx for ECO by burning ECOx and minting ECO_

  ```solidity
  function exchange(uint256 _ecoXValue) external
  ```
#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| _ecoXValue | uint256 | the value of ECOx tokens to burn |

### computeValue

_Computes the value of ECO from the ECOx value and the ECO supply_

  ```solidity
  function computeValue(uint256 _ecoXValue, uint256 _ecoSupply) internal view returns (uint256)
  ```
#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| _ecoXValue | uint256 | the value of ECOx |
| _ecoSupply | uint256 | the supply of ECO |

#### Return Values

| Name | Type | Description |
| ---- | ---- | ----------- |
| [0] | uint256 | the value of ECO |

### safeLeftShift

_Safe Left Shift_

  ```solidity
  function safeLeftShift(uint256 value, uint8 shift) internal pure returns (uint256)
  ```
#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| value | uint256 | the value to shift |
| shift | uint8 | the amount to shift the value by |

#### Return Values

| Name | Type | Description |
| ---- | ---- | ----------- |
| [0] | uint256 | the shifted amount |

### generalExp

this function can be auto-generated by the script [PrintFunctionGeneralExp.py](https://github.com/barakman/solidity-math-utils/blob/master/project/emulation/AutoGenerate/PrintFunctionGeneralExp.py).

it approximates `e ^ x` via maclaurin summation: `(x^0)/0! + (x^1)/1! + ... + (x^n)/n!`.

it returns `e ^ (x / 2 ^ precision) * 2 ^ precision`, that is, the result is upshifted for accuracy.

the global `maxExpArray` maps each `precision` to `((maximumExponent + 1) << (MAX_PRECISION - precision)) - 1`.

the maximum permitted value for `x` is therefore given by `maxExpArray[precision] >> (MAX_PRECISION - precision)`.

  ```solidity
  function generalExp(uint256 _x, uint8 _precision) internal pure returns (uint256)
  ```
#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| _x | uint256 | input value |
| _precision | uint8 | precision |

#### Return Values

| Name | Type | Description |
| ---- | ---- | ----------- |
| [0] | uint256 | `e ^ (x / 2 ^ precision) * 2 ^ precision`, that is, the result is upshifted for accuracy. |

